<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>VASP学习笔记 | Saber's Blog</title><meta name="author" content="Saber"><meta name="copyright" content="Saber"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="VASP学习笔记Vienna Ab-initio Simulation Package周期性边界条件的计算模式，主要算大晶体。VASP是用平面波基组来展开晶体的波函数。 VASP程序的主要输入文件INCAR  POSCAR POTCAR KPOINTS四种INCAR控制计算；POSCAR是结构数据，包括基向量和位置；POTCAR是赝势文件，通过连接数据库中的单个POTCAR文件生成；KPOINTS">
<meta property="og:type" content="article">
<meta property="og:title" content="VASP学习笔记">
<meta property="og:url" content="http://example.com/post/0.html">
<meta property="og:site_name" content="Saber&#39;s Blog">
<meta property="og:description" content="VASP学习笔记Vienna Ab-initio Simulation Package周期性边界条件的计算模式，主要算大晶体。VASP是用平面波基组来展开晶体的波函数。 VASP程序的主要输入文件INCAR  POSCAR POTCAR KPOINTS四种INCAR控制计算；POSCAR是结构数据，包括基向量和位置；POTCAR是赝势文件，通过连接数据库中的单个POTCAR文件生成；KPOINTS">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/Saberve.jpg">
<meta property="article:published_time" content="2023-09-01T14:22:04.809Z">
<meta property="article:modified_time" content="2023-09-01T14:26:35.428Z">
<meta property="article:author" content="Saber">
<meta property="article:tag" content="VASP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/Saberve.jpg"><link rel="shortcut icon" href="/img/Saberve.jpg"><link rel="canonical" href="http://example.com/post/0.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'VASP学习笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-01 22:26:35'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/Saberve.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/img.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Saber's Blog"><span class="site-name">Saber's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">VASP学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-09-01T14:22:04.809Z" title="Created 2023-09-01 22:22:04">2023-09-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-09-01T14:26:35.428Z" title="Updated 2023-09-01 22:26:35">2023-09-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/VASP/">VASP</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="VASP学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="VASP学习笔记"><a href="#VASP学习笔记" class="headerlink" title="VASP学习笔记"></a>VASP学习笔记</h1><h1 id="Vienna-Ab-initio-Simulation-Package"><a href="#Vienna-Ab-initio-Simulation-Package" class="headerlink" title="Vienna Ab-initio Simulation Package"></a>Vienna Ab-initio Simulation Package</h1><p><strong>周期性边界条件</strong>的计算模式，主要算大晶体。VASP是用平面波基组来展开晶体的波函数。</p>
<h2 id="VASP程序的主要输入文件"><a href="#VASP程序的主要输入文件" class="headerlink" title="VASP程序的主要输入文件"></a>VASP程序的主要输入文件</h2><h3 id="INCAR-POSCAR-POTCAR-KPOINTS四种"><a href="#INCAR-POSCAR-POTCAR-KPOINTS四种" class="headerlink" title="INCAR  POSCAR POTCAR KPOINTS四种"></a><strong>INCAR  POSCAR POTCAR KPOINTS四种</strong></h3><p>INCAR控制计算；POSCAR是结构数据，包括基向量和位置；POTCAR是赝势文件，通过连接数据库中的单个POTCAR文件生成；KPOINTS是布里渊区采样，描述使用了哪些K点。</p>
<ul>
<li><p>INCAR 告诉VASP算什么，怎么算。</p>
</li>
<li><p>KPOINTS 包含计算的K点信息(K点是什么，这个问题很抽象，脑子里先记住，计算的时候必须有这个东西)。</p>
</li>
<li><p>POSCAR是计算模型结构的文字描述，也就是各个原子在xyz方向的坐标信息。</p>
</li>
<li><p>POTCAR对应的是计算过程中每个原子的平面波基组，描述体系中对应的原子核和电子的相关信息。</p>
</li>
</ul>
<h4 id="INCAR是最重要的。"><a href="#INCAR是最重要的。" class="headerlink" title="INCAR是最重要的。"></a>INCAR是最重要的。</h4><p>它主要控制程序怎么做结构优化的，怎么做电子波函数的计算的，还有一些电荷密度、能带等等。</p>
<h3 id="常用参数："><a href="#常用参数：" class="headerlink" title="常用参数："></a><strong>常用参数：</strong></h3><p>SYSTEM</p>
<p>SYSTEM 后面是该计算的说明。你的这个任务算的是什么，目的是什么，体系是什么？等等，这写都可以<strong>随便</strong>写在里面。随便的意思就是可以任意写：</p>
<ul>
<li>SYSTEM &#x3D; O atom 和 SYSTEM &#x3D; I LOVE BigBro 和 SYSTEM &#x3D; VASP， 除了多出几个字符外，对计算没有什么影响。</li>
<li>不建议大家在这一行里写一堆乱七八糟的东西。</li>
<li>当然，这一行有或者没有，对计算结果不会有任何影响，看着不爽也可以直接删除。</li>
</ul>
<p>这些标签顺序不所谓，可以按照一定结构来写。</p>
<p>前面三个都是读写控制和精度。</p>
<p>ISTART&#x3D;0 代表随机生成波函数</p>
<p>ICHARG&#x3D;2</p>
<p>PREC&#x3D;N  N就是normal 正常的</p>
<p>电子波函数优化标签</p>
<p>NELM&#x3D;100 代表<strong>最大电子优化的步数</strong>，这里设定最大100步</p>
<p>ALGO&#x3D;N  <strong>电子波函数的优化算法</strong> 这里N 用的是DAB算法，收敛性比较好，速度比较慢。分子的收敛不如晶体的收敛好。</p>
<p>EDIFF&#x3D;1E-5  电子波函数优化的时候，<strong>体系能量收敛标准</strong>。</p>
<p>IBRION&#x3D;2 代表共轭梯度法优化，</p>
<p>NSW&#x3D;100  代表最大优化步长100步</p>
<p>ISIF&#x3D;2  等于2就是只优化原子，盒子不改变。</p>
<p>ENCUT&#x3D;400  平面波截断能</p>
<p>EDIFFG&#x3D;-3E-2  原子力上的收敛标准</p>
<p>ISMEAR&#x3D;0  ISMEAR这一项，目前需要记住的是：</p>
<ul>
<li>1）<strong>不同的值对应的是不同的展宽方法</strong>；</li>
<li>2）<strong>对于分子，原子的计算用0</strong>。</li>
</ul>
<p>SIGMA&#x3D;0.1  高斯分布的展宽</p>
<p>SIGMA的取值和ISMEAR息息相关，也就是和ISMEAR这个参数同时出现，设定。下面是一些基本的介绍：</p>
<ul>
<li>如果用了ISMEAR &#x3D; -5； SIGMA的值可以忽略，也可以不管。（对于所有体系都适用)；</li>
<li>对于金属： ISMEAR &#x3D; 1 或者0(应该是2吧，查一下，可能之前写错了），非金属: ISMEAR&#x3D; 0 的时候，一般取 SIGMA &#x3D; 0.10 即可，默认值是0.20。不放心的话，用0.05。</li>
<li><strong>对于气体分子，原子体系</strong>（也就是你把分子或者原子放到一个box里面）：死死记住下面组合就可以了， <strong>ISMEAR &#x3D; 0; SIGMA &#x3D; 0.01</strong>。</li>
</ul>
<p>对于金属<strong>SIGMA一般是0.2</strong></p>
<p>算DOS一般ISMEAR &#x3D; -5</p>
<p>k-point mesh and smearing are closely connected. We repeat here the guidelines for ISMEAR already given in section6.38:</p>
<p>• For semiconductors or insulators always use tetrahedron method (ISMEAR&#x3D;-5), if the cell is too large to use tetrahedron method use ISMEAR&#x3D;0</p>
<p>• For relaxations <em>in metals</em> always use ISMEAR&#x3D;1 and an appropriated SIGMA value (so that the entropy term is less than 1 meV per atom). </p>
<p><em>Mind:</em> Avoid to use ISMEAR&gt;0 for semiconductors and insulators, it might result in problems.</p>
<p>• For the DOS and very accurate total energy* calculations (no relaxation in metals) use the tetrahedron method (ISMEAR&#x3D;-5).</p>
<p>不过很多人都不放心，为了保险想测试一番。标准是： SIGMA的取值要保证OUTCAR 中的 entropy T*S 这一项，平均到每个原子上，要小于 1-2 meV。检查的时候可以用这个命令:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &#x27;entropy T&#x27;  OUTCAR</span><br></pre></td></tr></table></figure>

<p><strong>注意1：</strong>这里有两个单引号，不要输入的时候漏掉。</p>
<p>用这个命令，得出的能量除以体系中原子的数目（也就是平均到每个原子上），然后再和 0.001 eV 比较。如果小于，SIGMA取值OK，如果大于，再换个小点的数值进行测试。</p>
<p><strong>注意2：</strong>这里的说的entropy，是因为ISMEAR展宽这个计算方法引入的，跟我们物理化学书里面的entropy完全是两码事。后面我们会介绍如何通过频率分析计算物理化学里面的Entropy。</p>
<p>SIGMA的值是展宽，决定了电子的占有数，当它取不同值时，对金属体系的费米能处的电子占有数变化很大。一般地对于半导体和绝缘体来说SIGMA&#x3D;0.05就够小了，金属的默认取值0.2。如果计算的体系是金属，在静态计算物理量时，则<strong>用ISMEAR&#x3D;-5，这时不必设置SIGMA</strong>（此时SIGMA的取值对结果没有影响）。如果对体系进行驰豫，先用ISMAR&#x3D;1或2（金属体系）或0（半导体或绝缘体）优化出SIGMA，得到优化的结构后，再进行静态计算（ISMEAER&#x3D;0用的比较多，手册上的说法不管什么计算取ISMEAR&#x3D;0然后找一个合适的SIGMA就可以）。另外，SIGMA的值依赖于kmesh的大小，当kmesh发生改变时SIGMA的值也需要重新优化取值。</p>
<p><strong>SIGMA的选取与收敛速度有关，太小收敛慢，太大容易不收敛</strong>，但是最终要做到熵比较少才行，这样自由能和中能之间的差值就比较小。多小才算比较小呢？平均到每个原子上的能量差为1meV，也有的说是摊到每个原胞单位上自由能与总能的差在1meV，也就是小数点后第三位。因此对于原子比较多的超胞，比如100个原子，自由能与总能之间差0.1eV也是可以接受的。不过，大部分可以做到0.01eV。在保证收敛的前提下，SIGMA越小越好，没有所谓有点小的问题，用测试结果是最可信的。</p>
<p>做SIGMA优化可以采用这种方法：将SIGMA在不同大小的kmesh下进行静态计算测试，对每一个SIGMA值求“entropy T<em>S”值，可以得出一系列（一般取两条）不同kmesh下SIGMA与“entropy T</em>S”对应的曲线，将这些曲线比较，取不同kmesh曲线的“entropy T*S”差值最小的点对应的SIGMA值即可。具体参数设置可以参看侯柱峰编写的《<strong>VASP软件包使用入门指南</strong>》中“<strong>§5.7节ISMEAR和SIGMA</strong>”。</p>
<p>最好是每做一个计算，都要先做一个SIGMA的检测以选取合适的SIGMA值，不过在有了可靠的经验以后就不用每次都做了。绝缘体SIGMA可以取得小一点，金属的不要取的太小否则不容易收敛。在收敛速度可以接受的情况下可以适当减小SIGMA。</p>
<p><a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_919b72d50102x6sp.html">http://blog.sina.com.cn/s/blog_919b72d50102x6sp.html</a></p>
<p><code>ISPIN</code> 的取值为 <code>1</code> 或 <code>2</code>:</p>
<ol>
<li><p>代表不考虑自旋极化,是VASP的默认值;</p>
</li>
<li><p>代表打开自旋极化该选项,计算中考虑。</p>
</li>
</ol>
<h3 id="自旋极化什么时候该加呢"><a href="#自旋极化什么时候该加呢" class="headerlink" title="自旋极化什么时候该加呢?"></a>自旋极化什么时候该加呢?</h3><p>需要考虑自旋极化一般来说有以下几种：（新手记住前面4个即可。）</p>
<ul>
<li>单原子的计算,</li>
<li>O$_2$ 分子(基态为三重态)</li>
<li>自由基相关的计算</li>
<li>含Fe,Co, Ni 的体系</li>
<li>要计算的体系具有磁性：顺磁，铁磁，反铁磁等，要打开自旋极化。</li>
<li>当关注体系的电子性质时，且自己不知道加或者不加的时候，建议加上。</li>
</ul>
<p>如果你不知道自己的体系是否要考虑自旋极化，可以简单做这样的一个测试：</p>
<ul>
<li><p>测试1：不加自旋极化，正常算，得到结果1；</p>
</li>
<li><p>测试2：加上自旋极化，并在INCAR中添加： <code>LORBIT = 11</code><br>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>
</li>
<li><p><strong>测试2中’<code>OUTCAR</code>的末尾会输出各个原子的磁矩信息：</strong></p>
</li>
<li><p>测试2中OUTCAR的末尾会输出各个原子的磁矩信息：</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>6e2ce84518e1be61c275fe32fa33a1df18c0c4c7</p>
<ul>
<li>如果体系中原子的磁矩不为0，那么需要考虑自旋极化，</li>
<li>如果体系所有原子的磁矩都为0，那么就不需要考虑自旋极化，而且此时，你会发现测试1 和 2的结果中：结构和能量是一样的。</li>
</ul>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</li>
</ul>
<h3 id="ISIF"><a href="#ISIF" class="headerlink" title="ISIF"></a>ISIF</h3><p><img src="/img/image-20211028133650963.png" alt="image-20211028133650963"></p>
<p><strong>用ISIF &#x3D; 3的时候，</strong></p>
<p><strong>先算一次（比如十步），再把CONTAR转为POSCAR，再算一次（十步），</strong></p>
<p><strong>重复上述步骤，直到可以一步完成。</strong></p>
<p><strong>为什么这么做？Pulay stress ！！！！</strong></p>
<h3 id="7-6-1-How-to-calculate-the-Pulay-stress"><a href="#7-6-1-How-to-calculate-the-Pulay-stress" class="headerlink" title="7.6.1 How to calculate the Pulay stress"></a><strong>7.6.1 How to calculate the Pulay stress</strong></h3><p>The Pulay stress shows only a weak dependency on volume and the ionic confifiguration. It is mainly determined by the</p>
<p>composition. The simplest way to estimate the Pulay stress is to relax the structure with a large basis-set (1.3 </p>
<p>× default cutoff</p>
<p>is usually suffificient, or PREC&#x3D;High in VASP.4.4). Then re-run VASP for the fifinal relaxed positions and cell parameters wit</p>
<p>h</p>
<p>the default cutoff or the desired cutoff. Look for the line ’external pressure’ in the OUTCAR fifile:</p>
<p>external pressure &#x3D; -100.29567 kB</p>
<p>The corresponding (negative) pressure gives a good estimation of the Pulay stress.</p>
<h4 id="IBRION"><a href="#IBRION" class="headerlink" title="IBRION"></a>IBRION</h4><p>IBRION确定离子的更新和移动方式。对于IBRION&#x3D;0，将执行分子动力学，而所有其他算法都将松弛为局部能量最小值。对于困难的松弛问题，建议使用共轭梯度算法（IBRION&#x3D;2），该算法目前拥有最可靠的备份例程。阻尼分子动力学（IBRION&#x3D;3）通常在从非常糟糕的初始猜测开始时有用。接近局部最小值时，RMM-DII（IBRION&#x3D;1）通常是最佳选择。IBRION&#x3D;5和IBRION&#x3D;6使用有限差分法确定二阶导数（Hessian矩阵和声子频率），而IBRION&#x3D;7和IBRION&#x3D;8使用密度泛函微扰理论计算导数。</p>
<h2 id="2-什么是单点能计算-single-point-energy-？如何计算？https-www-jianshu-com-p-e484ee26d8f3"><a href="#2-什么是单点能计算-single-point-energy-？如何计算？https-www-jianshu-com-p-e484ee26d8f3" class="headerlink" title="2. 什么是单点能计算 (single point energy) ？如何计算？https://www.jianshu.com/p/e484ee26d8f3"></a>2. 什么是单点能计算 (single point energy) ？如何计算？<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/e484ee26d8f3">https://www.jianshu.com/p/e484ee26d8f3</a></h2><p>跟其它软件类似，VASP具有单点能计算的功能。也就是说，对一个给定的固定不变的结构（包括原子、分子、表面或体材料）能够计算其总能，即静态计算功能。</p>
<p>单点能计算需要的参数最少，最多只要在 KPOINTS 文件中设置一下合适的K点或者在 INCAR 文件中给定一个截断能 ENCUT 就可以了。还有一个参数就是电子步的收敛标准的设置 EDIFF，默认值为 EDIFF&#x3D;1E-4，一般不需要修改这个值。</p>
<p>具体来说要计算单点能，只要在 INCAR 中设置 <strong>IBRION&#x3D;-1</strong> 也就是让离子不移动就可以了。</p>
<h3 id="PREC"><a href="#PREC" class="headerlink" title="PREC"></a>PREC</h3><p>The PREC-flag determines the energy cutoff ENCUT, if (and only if) no value is given for ENCUT in the INCAR file. For PREC&#x3D;Low, ENCUT will be set to the maximal ENMIN value found in the POTCAR files. For PREC&#x3D;Medium and PREC&#x3D;Accurate, ENCUT will be set to maximal ENMAX value found on the POTCAR file (see 5.4). Finally for PREC&#x3D;High, ENCUT is set to the maximal ENMAX value in the POTCAR file plus 30%. PREC&#x3D;High guarantees that the absolute energies are converged to a few meV, and it ensures that the stress tensor is converged within a few kBar. In general, an increased energy cutoff is only required for accurate evaluation of quantities related to the stress tensor (e.g.elastic properties)</p>
<p>如果（且仅当）在INCAR文件中没有为ENCUT提供值，则PREC标志确定能量截止ENCUT。对于PREC&#x3D;Low，ENCUT将设置为POTCAR文件中的最大ENMIN值。对于PREC&#x3D;中等和PREC&#x3D;准确，ENCUT将设置为POTCAR文件中的最大ENMAX值（见5.4）。最后，对于PREC&#x3D;高，ENCUT设置为POTCAR文件中的最大ENMAX值加上30%。PREC&#x3D;高保证绝对能量收敛到几meV，并确保应力张量收敛到几KBar。一般来说，只有在准确评估与应力张量相关的量（例如弹性性质）时，才需要增加能量截止值</p>
<h3 id="POSCAR文件：晶体结构信息（主要是给的结构，要算什么体系，所有的东西都在这个文件里面）"><a href="#POSCAR文件：晶体结构信息（主要是给的结构，要算什么体系，所有的东西都在这个文件里面）" class="headerlink" title="POSCAR文件：晶体结构信息（主要是给的结构，要算什么体系，所有的东西都在这个文件里面）"></a>POSCAR文件：晶体结构信息（主要是给的结构，要算什么体系，所有的东西都在这个文件里面）</h3><p>描述所计算体系的晶胞参数，原子个数及晶胞中原子的位置，以及分子动力学计算时原子的初始速度（不常用）。</p>
<h4 id="简单说明"><a href="#简单说明" class="headerlink" title="简单说明"></a>简单说明</h4><p>POSCAR 里面包含了你要进行计算的模型结构信息。也就是你要研究的对象。POSCAR有自己固定的格式，每一行都有特定的含义，认真掌握这些，对于搭建模型非常有帮助。对于本节的例子：O原子的计算中，我们要把O原子放到一个格子里面，格子大小为：8 × 8 × 8 Å3次方。那么POSCAR应该这样写。</p>
<h4 id="POSCAR的输入"><a href="#POSCAR的输入" class="headerlink" title="POSCAR的输入"></a>POSCAR的输入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">O atom in a box </span><br><span class="line">1.0             # universal scaling parameters </span><br><span class="line">8.0 0.0 0.0     # lattice vector a(1) </span><br><span class="line">0.0 8.0 0.0     # lattice vector a(2)  </span><br><span class="line">0.0 0.0 8.0     # lattice vector a(3)  </span><br><span class="line">O               # O element， not zero</span><br><span class="line">1               # number of atoms </span><br><span class="line">Cartesian       # positions in cartesian coordinates </span><br><span class="line">0 0 0           #</span><br></pre></td></tr></table></figure>

<p><strong>详解：</strong></p>
<ul>
<li>第一行：同样随便写，但不能不写；</li>
<li>第二行：Scale factor，称为缩放系数，这里是1.0；</li>
<li>第三到五行：是组成格子的三条边的坐标信息；从原点出发，在xyz轴上分别取8Å。这个很容易理解；</li>
<li>第六行：体系中的元素，这里我们算的是氧原子，所以写：O，即氧的元素符号。需要注意的有以下几点：<ul>
<li>vasp4.xx版本里面没有这一行，不过现在几乎没人用4.X的版本了；</li>
<li>O的符号和数字0容易混淆，一定要注意；</li>
<li>第一个元素符号要顶格写，前面不要有空格，有可能会出错；</li>
<li>如果计算文件夹里面，已经有与结构相一致的POTCAR，那么POSCAR里面即使删了这一行有不会影响计算，VASP会读取POTCAR中的元素信息，但输出文件CONTCAR中会把该行自动加上。（新手跳过）</li>
</ul>
</li>
<li>第七行：与第六行中元素相对应的原子数目，这里我们只有1个氧原子，所以写成1；</li>
<li>第八行：体系中原子的坐标系，可以为笛卡尔坐标，也可以为分数坐标系。注意的有以下几点：<ul>
<li>这一行同KPOINTS的第三行一样，即只认第一个字母；</li>
<li>C或者c代表笛卡尔坐标， D或者d代表分数坐标系（相对位置，大小 0~1）;</li>
<li>VASP输出文件CONTCAR里面采用的是分数坐标系。</li>
</ul>
</li>
<li>第九行：体系中原子的坐标信息。这里我们把O原子放到了原点（0.0 0.0 0.0）的位置，大家也可以随便放一个位置，比如：（4.0 5.0 6.0），（1.1 2.5 6.5）都是可以的。由于周期性的存在，不管你怎么放，相邻两个格子之间氧原子的距离都是一样的。</li>
<li>写完之后，和INCAR，KPOINTS文件一样，直接保存成POSCAR即可。</li>
</ul>
<h5 id="两点说明"><a href="#两点说明" class="headerlink" title="两点说明"></a>两点说明</h5><ul>
<li>第二行中的Scale factor还可以写成其他的数字，例如：写成2.0，则后面的格子以及原子坐标相关的数值都要除以2。一般来说，写成1.0即可，这样比较直观，清晰;</li>
<li>笛卡尔和分数坐标系的区别是从原子的坐标行开始的（这个例子里面是第8行），即坐标前面的都保持完全一致。 也就是说，如果想从笛卡尔转换成分数坐标，我们只需将Cartesian改成Direct，然后修改后面的原子坐标，而Cartesian行前面的部分保持不变。</li>
</ul>
<h3 id="本节重点："><a href="#本节重点：" class="headerlink" title="本节重点："></a>本节重点：</h3><ul>
<li>学会写O原子在格子里面这个模型的POSCAR；</li>
<li>知道每一行所代表的含义。</li>
</ul>
<p><strong>如果缩放系数那一行填写晶格常数，难么接下来的三行应该写初基平移矢量</strong></p>
<p>固体物理 P8</p>
<h3 id="POTCAR文件是POSCAR文件中包含的元素，比如说Si、O、Fe等，它的赝势（就是它在这个晶体当中的势场）"><a href="#POTCAR文件是POSCAR文件中包含的元素，比如说Si、O、Fe等，它的赝势（就是它在这个晶体当中的势场）" class="headerlink" title="POTCAR文件是POSCAR文件中包含的元素，比如说Si、O、Fe等，它的赝势（就是它在这个晶体当中的势场）"></a>POTCAR文件是POSCAR文件中包含的元素，比如说Si、O、Fe等，它的赝势（就是它在这个晶体当中的势场）</h3><p>PS:这是VASP自带的，可以去VASP官网下载。每一个元素对应的不止一个赝势。</p>
<p><strong>POTCAR中各项的含义</strong></p>
<p>POTCAR中有很多信息，对于大部分的参数，本人也是只认识字母，不知具体含义，所以只能介绍一下在实际计算中会用到的一些参数。我们用Fe的POTCAR中前面的几行作为一个例子，简单介绍一下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">PAW_PBE Fe 06Sep2000</span><br><span class="line">8.00000000000000000</span><br><span class="line">parameters from PSCTR are:</span><br><span class="line">  VRHFIN =Fe:  d7 s1</span><br><span class="line">  LEXCH  = PE</span><br><span class="line">  EATOM  =   594.4687 eV,   43.6922 Ry</span><br><span class="line"></span><br><span class="line">  TITEL  = PAW_PBE Fe 06Sep2000</span><br><span class="line">  LULTRA =        F    use ultrasoft PP ?</span><br><span class="line">  IUNSCR =        1    unscreen: 0-lin 1-nonlin 2-no</span><br><span class="line">  RPACOR =    2.000    partial core radius</span><br><span class="line">  POMASS =   55.847; ZVAL   =    8.000    mass and valenz</span><br><span class="line">  RCORE  =    2.300    outmost cutoff radius</span><br><span class="line">  RWIGS  =    2.460; RWIGS  =    1.302    wigner-seitz radius (au A)</span><br><span class="line">  ENMAX  =  267.883; ENMIN  =  200.912 eV</span><br><span class="line">  RCLOC  =    1.701    cutoff for local pot</span><br><span class="line">  LCOR   =        T    correct aug charges</span><br><span class="line">  LPAW   =        T    paw PP</span><br><span class="line">  EAUG   =  511.368</span><br><span class="line">  DEXC   =    -.022</span><br><span class="line">  RMAX   =    2.817    core radius for proj-oper</span><br><span class="line">  RAUG   =    1.300    factor for augmentation sphere</span><br><span class="line">  RDEP   =    2.442    radius for radial grids</span><br><span class="line">  QCUT   =   -4.437; QGAM   =    8.874    optimization parameters</span><br></pre></td></tr></table></figure>

<p>依个人的学习经验，VRHFIN， LEXCH，TITEL，ZVAL，ENMAX是用到最多的几个参数。</p>
<ul>
<li>VRHFIN 用来看元素的价电子排布，如果你元素周期表倒背如流，可以忽略这个参数；</li>
<li>LEXCH 表示这个POTCAR对应的是GGA-PBE泛函；如果INCAR中不设定泛函，则默认通过这个参数来设定。</li>
<li>TITEL 就不用说了，指的是哪个元素，以及POTCAR发布的时间；</li>
<li>ZVAL 指的是实际上POTCAR中价电子的数目，尤其是做Bader电荷分析的时候，极其重要。</li>
<li>ENMAX 代表默认的截断能。与INCAR中的ENCUT这个参数相关。</li>
</ul>
<p>当然，如果你进入文件夹，使用ls命令后，会发现：即使对于同一个元素来说，也可能会有很多不同的情况。比如：</p>
<ul>
<li>与GW 计算的对应的POTCAR，则标注为：Fe_GW 这样。（GW计算本人没接触过，这里就没有办法继续下去了）；</li>
<li>根据价电子的处理方式，分成了诸如：Fe，Fe_pv，Fe_sv的这样的情况。v是valence的缩写。pv代表把内层的p电子作为价电子来处理。sv代表则是把更内层的s电子也作为价电子来处理。具体到自己体系中的元素，可以结合元素周期表，以及ZVAL关键词所对应的价电子数目，来进行推断。</li>
<li>此时，我们就需要学习一个非常有用的Linux命令了： grep。 下面是我们使用grep命令，来获取所有与Fe相关POTCAR的价电子信息。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ ls Fe*</span><br><span class="line">Fe:</span><br><span class="line">POTCAR  PSCTR</span><br><span class="line"></span><br><span class="line">Fe_GW:</span><br><span class="line">POTCAR  PSCTR</span><br><span class="line"></span><br><span class="line">Fe_pv:</span><br><span class="line">POTCAR  PSCTR</span><br><span class="line"></span><br><span class="line">Fe_sv:</span><br><span class="line">POTCAR  PSCTR</span><br><span class="line"></span><br><span class="line">Fe_sv_GW:</span><br><span class="line">POTCAR  PSCTR</span><br><span class="line"></span><br><span class="line">$ grep ZVAL Fe*/POTCAR</span><br><span class="line">Fe/POTCAR:   POMASS =   55.847; ZVAL   =    8.000    mass and valenz</span><br><span class="line">Fe_GW/POTCAR:   POMASS =   55.847; ZVAL   =    8.000    mass and valenz</span><br><span class="line">Fe_pv/POTCAR:   POMASS =   55.847; ZVAL   =   14.000    mass and valenz</span><br><span class="line">Fe_sv/POTCAR:   POMASS =   55.847; ZVAL   =   16.000    mass and valenz</span><br><span class="line">Fe_sv_GW/POTCAR:   POMASS =   55.847; ZVAL   =   16.000    mass and valenz</span><br></pre></td></tr></table></figure>

<ul>
<li>还有把内层d轨道考虑到价电子层里面去的，比如：Ge_d。</li>
<li>某些元素，还有一些以 _h， _s 结尾的，应该是 hard和soft的缩写。带h的POTCAR中截断能比普通的要高出很多。带s的截断能要小很多。这里我们就可以通过grep 结合 ENMAX来查看一下：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ grep ENMAX Ge*/POTCAR</span><br><span class="line">Ge/POTCAR:   ENMAX  =  173.807; ENMIN  =  130.355 eV</span><br><span class="line">Ge_d/POTCAR:   ENMAX  =  310.294; ENMIN  =  232.720 eV</span><br><span class="line">Ge_d_GW/POTCAR:   ENMAX  =  375.434; ENMIN  =  281.576 eV</span><br><span class="line">Ge_GW/POTCAR:   ENMAX  =  173.807; ENMIN  =  130.355 eV</span><br><span class="line">Ge_h/POTCAR:   ENMAX  =  410.425; ENMIN  =  307.818 eV</span><br><span class="line">Ge_sv_GW/POTCAR:   ENMAX  =  410.425; ENMIN  =  307.818 eV</span><br></pre></td></tr></table></figure>

<p><strong>POTCAR的选择</strong></p>
<p>既然对于同一个元素，存在那么多的POTCAR类型，计算的时候我们改怎么选择呢？这里大师兄只能给的建议是：如果没有特别的需求，直接采用VASP官网推荐的即可。参考链接：</p>
<p><a target="_blank" rel="noopener" href="https://cms.mpi.univie.ac.at/vasp/vasp/Recommended_PAW_potentials_DFT_calculations_using_vasp_5_2.html">https://cms.mpi.univie.ac.at/vasp/vasp/Recommended_PAW_potentials_DFT_calculations_using_vasp_5_2.html</a></p>
<p>我们在计算的时候，根据体系中的元素，将这些元素的POTCAR结合起来，组成一个新的POTCAR，这个结合的步骤，我们需要用到Linux的另一个命令：cat。比如VASP官网的例子，体系中含有Al， C，H三种元素。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/pot/Al/POTCAR ~/pot/C/POTCAR ~/pot/H/POTCAR &gt;POTCAR</span><br></pre></td></tr></table></figure>

<p>通过这一行命令就可以把Al，C，H各自的POTCAR结合在一起。<strong>OUTCAR中的元素顺序一定要和POSCAR保持一致,否则计算会出错</strong>，为了避免计算出错，还有一些高级的方法，这个在后面会慢慢讲解。</p>
<p>本节讲的是O原子的计算，官网推荐的氧原子POTCAR，默认的截断能是400，价层有6个原子。直接把O这个文件夹中的POTCAR直接复制到INCAR所在的目录即可。</p>
<p><strong>POTCAR检查常用的Linux命令：</strong></p>
<p>查看POTCAR中的元素:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep  TIT POTCAR</span><br></pre></td></tr></table></figure>

<p>查看POTCAR的截断能:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep  ENMAX POTCAR</span><br></pre></td></tr></table></figure>

<p>查看POTCAR中元素的价电子数目：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep  ZVAL POTCAR</span><br></pre></td></tr></table></figure>

<p>举一反三，只要找到了关键词，我们就可以通过grep命令来进行查看。</p>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><p>这一节，我们简单介绍了一下POTCAR中的内容，选取规则，以及通过grep命令和关键词进行查看。如果你能独立完成下面的几点，就圆满完成了本节的学习：</p>
<ul>
<li>VRHFIN， LEXCH，TITEL，ZVAL，ENMAX 这几个参数的大体意思；</li>
<li>初步了解：Fe_sv，Fe_pv， Ge_d, Ge_gw，C_s, C_h 这些标记的含义；</li>
<li>查看VASP官网，了解VASP推荐的POTCAR；</li>
<li>使用grep来获取POTCAR中有价值的信息。</li>
</ul>
<h3 id="KPOINTS是一些不连续的特殊点（两种：k点网格或坐标信息）"><a href="#KPOINTS是一些不连续的特殊点（两种：k点网格或坐标信息）" class="headerlink" title="KPOINTS是一些不连续的特殊点（两种：k点网格或坐标信息）"></a>KPOINTS是一些不连续的特殊点（两种：k点网格或坐标信息）</h3><p>KPOINTS是 <u>设置布里渊区k点网格取样代销或能带结构计算时沿高对称方向的k点</u>。</p>
<p>对一个原子，它是非周期性体系。所以它只能有1个k点，Gamma点。</p>
<h3 id="KPOINTS的输入和保存"><a href="#KPOINTS的输入和保存" class="headerlink" title="KPOINTS的输入和保存"></a>KPOINTS的输入和保存</h3><p>打开编辑器，把下面几行输入进去:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">K-POINTS      #  第一行随便写都行，但不能没有</span><br><span class="line"> 0             # 零，格子自动生成</span><br><span class="line">Gamma         #  gamma点centered </span><br><span class="line">1 1 1         #  1*1*1格子</span><br><span class="line">0 0 0         #  S1 S2 S3， 一般保持 0 0 0 不变。</span><br></pre></td></tr></table></figure>

<p><strong>详解:</strong></p>
<ul>
<li>该KPOINTS 文件里面，共有5行，#号以及后面的不用输入；</li>
<li>同INCAR的注释一样，不要在每一行后面使用 ! 来进行注释，要使用 #，且最好不要写中文。</li>
<li>第一行：可以随便写内容，但不能没有;</li>
<li>第二行：数字0，不是字母O，0 在这里表示的是自动生成K点。你可能注意到了，0前面有个空格，不过没关系，对计算不影响，可以删掉，也可以再加一个空格，后面的同样如此。 但是避免用tab输入，VASP有时候不识别tab键输入的空白部分，导致计算出错；</li>
<li>第三行：VASP只认第一个字母，大小写均可。在这里Gamma和gamma，Gorge，gorge效果是一样的，当然这一行也可以直接写字母G或者g。<ul>
<li>G表示的是以gamma点为中心生成网格。</li>
<li>另外一种是原始的Monkhorst-Pack 网格，两者的区别是 M 或者 m 在 G的基础上在三个方向上平移了1&#x2F;（2N）个单位。</li>
<li>G，也叫 gamma centered Monkhorst-Pack Grid；所以，gamma centered 只是MP网格的一种特殊情况。</li>
</ul>
</li>
<li>第四行，在xyz三个方向上生成对应数目的K点，本例是111;<ul>
<li>对于原子或者分子的计算，K点取一个gamma点就够了（1 1 1），也就是这个KPOINTS文件可以用于绝大多数的原子或者分子计算，不用再修改；</li>
<li>但如果你要用ISMEAR &#x3D; -5 来计算能量，那么就需要把 1 1 1 改成 2 2 2或者3 3 3。</li>
</ul>
</li>
<li>第五行，一般都写成 0 0 0 ，不用动即可；</li>
<li>按照前面INCAR的方式保存文件，名字为KPOINTS。</li>
</ul>
<h3 id="KPOINTS的建议"><a href="#KPOINTS的建议" class="headerlink" title="KPOINTS的建议"></a>KPOINTS的建议</h3><p>K点在VASP计算中非常重要，大师兄给的一个建议是：</p>
<ul>
<li>一直用gamma centered，也就是第三行保持G不变。因为M平移之后，网格的对称性和晶胞的对称性会出现不匹配的情况，从而导致计算出错，尤其是对于六角晶系hexagonal的结构，必须用gamma centered!这一点，vasp官网说的很明确；其他的建议后续慢慢展开讨论。</li>
<li>如非六角晶系的计算，如果已经设置的M算起来了，继续用M算就行，没必要改成G再重新算一遍；</li>
<li>前面看不懂，没事。<strong>记住这一点，本节就圆满完成任务</strong>：气体分子，原子计算的时候，使用gamma点即可。</li>
</ul>
<h2 id="KPOINTS的取值：经验方法（k-a）"><a href="#KPOINTS的取值：经验方法（k-a）" class="headerlink" title="KPOINTS的取值：经验方法（k * a）"></a>KPOINTS的取值：经验方法（k * a）</h2><p><a target="_blank" rel="noopener" href="http://blog.wangruixing.cn/2019/04/25/kpoints/">http://blog.wangruixing.cn/2019/04/25/kpoints/</a></p>
<p>KPOINTS的建议取值下图， 每个晶格矢量的长度乘以这个方向上的k点数。注意要测试收敛性。</p>
<p>比如我要算一个绝缘体，a，b的晶胞长度为5 Å，c的长度为15 Å，则K点取 3 3 1。</p>
<p><img src="http://blog.wangruixing.cn/images/kpoints/kpoints2.png" alt="unfold band"></p>
<p>unfold band</p>
<p>d区金属，<em>ka ~</em> 30 Å</p>
<p>普通金属，<em>ka ~</em> 25 Å</p>
<p>半导体，<em>ka ~</em> 20 Å</p>
<p>绝缘体，<em>ka ~</em> 15 Å</p>
<p>以上建议是要严格遵守的嘛？<strong>不是！</strong></p>
<h2 id="VASP程序的主要输出文件"><a href="#VASP程序的主要输出文件" class="headerlink" title="VASP程序的主要输出文件"></a>VASP程序的主要输出文件</h2><p>CHG和CHGCAR文件：</p>
<p>这两个都是给出了体系的<u>电荷密度</u>文件，他们的内容是相同的，只是前者给出的数据的精度要比后者的精度略低一些。</p>
<p>CHGCAR文件的<strong>头9行给出的体系的晶格参数</strong>，与POSCAR中的内容基本相同</p>
<h2 id="VASP运行流程"><a href="#VASP运行流程" class="headerlink" title="VASP运行流程"></a>VASP运行流程</h2><p>DFT（密度泛函理论简写）里面有一个很重要的东西：基态电荷密度和它的体系的基态能量是挂钩的。也就是说在整个的计算过程中就是为了求得它的基态电荷密度，从而达到（获得）一个最稳定的结果（它的基态能量）。</p>
<p>所以 自洽循环 就是为了求解它的一个最稳定的电荷分布。</p>
<p><img src="/img/image-20210911173208025.png" alt="image-20210911173208025"></p>
<p>初始电荷密度n0(r) 必须要猜（谁也不知道晶体当中的电荷怎么分布的），给一个初始值。</p>
<p>猜了初始电荷密度后，它可以构建一个晶体当中的势场。</p>
<p>有了这个势场，代到  能量本征方程里，可以解出<strong>电子的能量本征值εi</strong>和<strong>它的波函数</strong>。</p>
<p>根据电荷密度和波函数的这样一个关系，它可以算出新的电荷密度。</p>
<p><strong>比较两者是否一样，或者两者误差是否小于设定的收敛标准</strong>。如果比较小，那就解完了。这个自洽循环就做完了。自洽循环做完，意味着晶体的波函数已经得到了，（电荷密度、波函数、能量，这些性质都拿到了）</p>
<p>如果不相等（一般情况下，没有一次就相等的），就把新解出来的电荷密度再带回n0(r)（前面猜的） ,再到方程里面求解，直到两者误差小于设定的收敛标准。</p>
<p><strong>拿到收敛的电子波函数</strong>，就可以算出原子上的受力。有了原子上的受力，原子就可以移动，进行结构优化，原子往力下降的方向移动（就是用<strong>共轭梯度法，最速降线法</strong>这些结构优化的方法，<strong>搜索离子下一个位置</strong>）。</p>
<p>下一个位置继续求解这样一个自洽循环，因为离子移动，势场就发生了变化。再（在自洽循环）转一圈，再把波函数解出来。直至到 离子上的受力达到设定的收敛标准（或者受接近于0）。</p>
<p>这样整个结构优化就做完了。</p>
<p><strong>在结构优化过程中，我们可以得到收敛的电子波函数，平衡位置（力为0）的这样一个晶体结构，还有它体系的能量。</strong></p>
<p>结构优化做完了（离子固定不动），要做一个自洽计算（放入原来的自洽循环算一次），把电荷密度和电子波函数算出来。算出来之后，把电荷密度固定，把离子固定，再去解波函数，可以得到它的一些基本性质：比如态密度、能带结构、光学性质等等。</p>
<h4 id="总结一下：三步。结构优化，自洽计算，非自洽计算。就可以完成VASP的几乎是所有的性质计算的步骤。就可以得到稳定的结构位置、收敛的电荷密度、还有它的一些能量本征值等一些性质。"><a href="#总结一下：三步。结构优化，自洽计算，非自洽计算。就可以完成VASP的几乎是所有的性质计算的步骤。就可以得到稳定的结构位置、收敛的电荷密度、还有它的一些能量本征值等一些性质。" class="headerlink" title="总结一下：三步。结构优化，自洽计算，非自洽计算。就可以完成VASP的几乎是所有的性质计算的步骤。就可以得到稳定的结构位置、收敛的电荷密度、还有它的一些能量本征值等一些性质。"></a>总结一下：三步。结构优化，自洽计算，非自洽计算。就可以完成VASP的几乎是所有的性质计算的步骤。就可以得到稳定的结构位置、收敛的电荷密度、还有它的一些能量本征值等一些性质。</h4><p>计算一个体系，我们有<code>2</code>个优化过程：</p>
<ul>
<li>电子结构的优化： 可以理解为对某一固定的几何结构，迭代求解薛定谔方程来获得体系能量极小值的一个过程。这个迭代过程，每一次迭代求解都可以认为是电子结构的一个优化。（通常被大伙称为：电子步）</li>
<li>几何结构的优化：可以理解为在电子结构优化的结果上，获取原子的受力情况，然后根据受力情况，调节原子的位置，再进行电子结构优化，获取新的受力情况，然后再调节原子位置，一直重复这样的过程，直至找到体系势能面上一个极小值的过程。（通常被大伙称为：离子步）</li>
</ul>
<p>思考一下，我们的<code>O</code>原子，我们只可能对它进行电子结构的优化，因为它的几何结构不会发生变化。</p>
<h2 id="赝势、赝波函数。"><a href="#赝势、赝波函数。" class="headerlink" title="赝势、赝波函数。"></a>赝势、赝波函数。</h2><p>原子外层的电子，如果电子比较靠近原子核，它这个势场是发散的（库仑力的方程形式是 1&#x2F;r） ，发散就会导致真实波函数是震荡的。震荡就会导致 <strong>能量本征方程</strong>的求解非常麻烦，收敛速度非常慢，甚至不收敛。这里就引入了赝势的概念。</p>
<p>就是说在价电子部分还是采用真实的势场，越靠近原子核的部分，就不要了（因为它对外面的化学性质没什么影响。化学性质只是取决于价电子。新电子部分就用一个假的，叫赝势的一个东西，取代它的真实的势场。就可以使得假的赝波函数收敛的比较好。所有做的这些就是为了加速计算收敛。</p>
<p>由此可见，VASP对于氧原子的描述不是很准确（不理解的请看上一节的详细描述)。而这一点，VASP官网你是找不到的。因此，在计算的时候，对于自己的体系有一个清晰的化学物理印象很重要。VASP的结果也要有针对的去判断。有的时候，即使计算收敛了，但没有体现出任何正确的物理或者化学意义，那就是单纯的数学收敛，结果是不可取的。VASP是一个计算的工具，如何正确分析和判断它的输出才是关键的。这一点我们在后面的学习中也会反复强调。</p>
<h3 id="VASP是怎么判断收敛的"><a href="#VASP是怎么判断收敛的" class="headerlink" title="VASP是怎么判断收敛的?"></a>VASP是怎么判断收敛的?</h3><p>我们看一下VASP的迭代计算过程：</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/02/ex09/ex09-05.jpeg"><img src="https://www.bigbrosci.com/2017/12/02/ex09/ex09-05.jpeg" alt="img"></a></p>
<ul>
<li>首先，它会猜一个初始的电子密度，然后据此计算体系的势能，求解KS方程，并给出体系的总能量以及对应的电子密度，也就是我们之前说的电子步的优化。</li>
<li>将最新一步的结果与前面进行对比，当前后两者的差值达到我们预设的收敛标准时，计算结束。</li>
<li>这个预设的收敛标准在VASP中通过两个参数来描述：EDIFF 和 EDIFFG。</li>
<li>EDIFF 控制电子步（自洽）的收敛标准。在O原子的计算中，由于我们不需要优化，直接进行静态计算，完全由EDIFF控制计算的收敛情况。EDIFFG后面我们再介绍。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/02/ex09/ex09-06.jpeg"><img src="https://www.bigbrosci.com/2017/12/02/ex09/ex09-06.jpeg" alt="img"></a></p>
<p>从图中可以看出：第19步和18步的能量差为：-0.3484 E-04，停止迭代，开始输出结果。这是因为VASP计算中EDIFF的默认值是 1 x 10-4。</p>
<h3 id="鱼和熊掌的关系"><a href="#鱼和熊掌的关系" class="headerlink" title="鱼和熊掌的关系"></a>鱼和熊掌的关系</h3><p><strong>那么：</strong></p>
<p><strong>是不是精度越高，计算越准确呢？ 这是肯定的！</strong></p>
<p><strong>是不是计算都需要这么高的精度呢？ 这肯定不是的！</strong></p>
<p>精度高（鱼：&lt;・)))&gt;&lt;&lt;）意味着需要更多的迭代次数，也就是需要更多的计算时间（熊掌）。下图是收敛标准从默认值的1E-4 降低到1E-7后的收敛情况：单迭代次数从19增加到了27，相当于增加了原来1&#x2F;2的工作量。所以，精度太高，计算量会增加。应了那句流行语：请在wifi下观看，土豪随意。</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/02/ex09/ex09-07.jpeg"><img src="https://www.bigbrosci.com/2017/12/02/ex09/ex09-07.jpeg" alt="img"></a></p>
<p>我们看一下扩展阅读的内容:</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/02/ex09/ex09-08.jpeg"><img src="https://www.bigbrosci.com/2017/12/02/ex09/ex09-08.jpeg" alt="img"></a></p>
<p>第一点：官网说（红色方框中内容）：如果我们把收敛标准设置成0，那么迭代会永远进行下去。大师兄很感兴趣，便设置：<code>EDIFF = 0</code>测试了一番，结果如下:</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/02/ex09/ex09-09.jpeg"><img src="https://www.bigbrosci.com/2017/12/02/ex09/ex09-09.jpeg" alt="img"></a></p>
<p>可以看到，在45步迭代之后，精度收敛到1E-12，VASP便停止了，而不是所谓的always! VASP又把俺们给骗了!</p>
<p>骗归骗，但计算量的增加确是铁打的事实，从1E-4的19步，增加到了45步。</p>
<p>思考另外一个问题：既然精度从默认值1E-4提高到1E-12 (8个数量级)，那么我们算出来的氧原子能量有什么变化呢？看下图:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">iciq-lq@ln3:/THFS/home/iciq-lq/LVASPTHW/ex09$ ls</span><br><span class="line">0  4  7</span><br><span class="line">iciq-lq@ln3:/THFS/home/iciq-lq/LVASPTHW/ex09$ ta.sh</span><br><span class="line">0        -1.89224598</span><br><span class="line">4        -1.89218308</span><br><span class="line">7        -1.89224603</span><br></pre></td></tr></table></figure>

<p>图中的0， 4， 7 分别代表EDIFF为 0， 1E-4和 1E-7 的情况，我们可以看出，这三个计算结果中，能量随着EDIFF的减小变化甚微。当然，这也与我们简单的测试体系有关系。倘若计算N多个原子的体系时，不同的精度间的差值会有所增大。上面图中使用了一个小脚本：<code>ta.sh</code>，内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env bash</span><br><span class="line">for i in *; do</span><br><span class="line">if [ -e $i/OUTCAR ]; then</span><br><span class="line">echo -e  $i &quot;\t&quot; $(grep &#x27;  without&#x27; $i/OUTCAR |tail -n 1 | awk &#x27;&#123;print $7&#125;&#x27;)</span><br><span class="line">fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="如何看VASP的说明书"><a href="#如何看VASP的说明书" class="headerlink" title="如何看VASP的说明书"></a>如何看VASP的说明书</h3><p>那么我们再看一遍VASP官网的说明，注意底部的Mind部分:</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/02/ex09/ex09-10.jpeg"><img src="https://www.bigbrosci.com/2017/12/02/ex09/ex09-10.jpeg" alt="img"></a></p>
<p>大家在浏览VASP官网的时候，凡是带有<code>Mind</code>，<code>Important</code>字样的，它们后面的文字一定要认真阅读，把握其中的含义。因为这都是大家常见的疑难点以及易错的地方。收敛速度跟<code>EDIFF</code>的值成指数关系，在大多数的情况下，<code>1E-4</code>足以胜任，没有必要采用其他的数值，如果大伙感觉不放心，大师兄建议<code>1E-5</code>即可。</p>
<h3 id="几何优化的收敛标准"><a href="#几何优化的收敛标准" class="headerlink" title="几何优化的收敛标准"></a>几何优化的收敛标准</h3><p>目前还没有介绍几何优化，先简单介绍下EDIFFG这个参数，大家知道即可，后面学习到了再回来看。</p>
<p>我们优化几何结构的时候，当结构前后变化达到我们设定的要求时，便停止优化。而这个设定的要求，就是通过EDIFFG来控制。</p>
<ul>
<li><p>对于优化，我们可以使用力作为收敛标准，此时EDIFFG为负值。一般来说取值在-0.01到-0.05之间(-0.01对于力收敛来说已经是一个很严格的要求了)。</p>
</li>
<li><p>当然，对于较大的体系，我们也可以使用能量作为标准：此时，EDIFFG 为正值，一般取值范围在0.0001-0.001即可。</p>
<p><strong>注意:</strong></p>
</li>
</ul>
<p>不要把正负值弄错了。大师兄见过一个群友这么设置的: EDIFFG &#x3D; -0.0001。然后在群里咨询为什么他的计算不收敛。这就好比在没有WiFi的时候，装成土豪看视频，卡里的钱扣完了，视频才看到一半…..前面说到，<code>EDIFFG = -0.01</code>的时候收敛就已经够费劲了， 你再加个0，莫不是要算到天荒地老？</p>
<h5 id="小结一下"><a href="#小结一下" class="headerlink" title="小结一下"></a>小结一下</h5><p>EDIFF，EDIFFG 是控制收敛标准的两个参数。前者负责电子自洽过程(单个离子步内)，取值为1E-4或者1E-5即可，没有特殊要求，不建议设置的太低。后者负责结构优化的过程(可正可负)。对于EDIFFG，默认值采用能量收敛，标准为:EDIFFx10。</p>
<h1 id="单点计算："><a href="#单点计算：" class="headerlink" title="单点计算："></a>单点计算：</h1><p>顾名思义就是不优化结构，直接算个能量，电子相关的性质。你也可能会听到很多人说静态计算，或者自冾计算。其实都一样的：几何结构计算前后不发生变化。</p>
<h3 id="VASP-优化分子结构"><a href="#VASP-优化分子结构" class="headerlink" title="VASP 优化分子结构"></a>VASP 优化分子结构</h3><p>VASP优化分子结构的时候，需要用到一个参数：<code>IBRION</code>。引用官网的话：IBRION determines how the ions are updated and moved. 也就是说IBRION 这个参数决定了结构的优化过程。当你去官网查看的时候（google 搜索VASP IBRION这两个关键词），会发现IBRION有很多值。</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/03/ex11/ex11-6.jpeg"><img src="https://www.bigbrosci.com/2017/12/03/ex11/ex11-6.jpeg" alt="img"></a></p>
<p>想要正确进行计算，你就需要去硬着头皮去了解各个值的含义了，这个过程必须自己去做，只听别人的建议去设置参数，而不自己去主动学习的，你的能力永远不会得到提升！！！</p>
<p>一般来说，优化结构的时候有3个选择：</p>
<p>IBRION&#x3D;3：你的初始结构很差的时候；</p>
<p>IBRION&#x3D;2：共轭梯度算法，很可靠的一个选择，一般来说用它基本没什么问题。</p>
<p>IBRION&#x3D;1：用于小范围内稳定结构的搜索。</p>
<p>如果你的体系遇到结构不收敛的时候，首先检查自己的结构是否合理，也就是物理化学意义是否清晰。如果结构没问题，可以尝试下换下IBRION的参数。</p>
<p>下面，我们在INCAR中加上IBRION参数（IBRION&#x3D;2），其他输入文件保持不变，重新进行计算：</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/03/ex11/ex11-7.jpeg"><img src="https://www.bigbrosci.com/2017/12/03/ex11/ex11-7.jpeg" alt="img"></a></p>
<p>如果是用上图中的INCAR，你会发现任务很快就算完了。而且只有一步，难道输入的结构就是VASP计算出来的的稳定结构吗？有这种可能，但几率极低。</p>
<p>如果我们仔细查看下OUTCAR中的电子构型，发现它的信息和前面的单点计算一样。这说明，vasp并没有优化，而是又运行了一次单点计算。</p>
<p>为什么呢？ 这是因为另一个参数：<code>NSW</code>。</p>
<h1 id="NSW-控制几何结构优化的步数"><a href="#NSW-控制几何结构优化的步数" class="headerlink" title="NSW 控制几何结构优化的步数"></a>NSW 控制几何结构优化的步数</h1><p>也就是VASP进行多少离子步。</p>
<p>官网查看下NSW选项，发现默认值是0，也就是没有进行优化。（默认值，也叫缺省值，英文里面是 Default。 意思是，如果你不输入这个参数，程序将默认使用XXX的数值）</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/03/ex11/ex11-8.jpeg"><img src="https://www.bigbrosci.com/2017/12/03/ex11/ex11-8.jpeg" alt="img"></a></p>
<p>现在原因找到了，继续进行优化任务。问题来了：NSW怎么设置呢？</p>
<ul>
<li>首先，它必须是大于等于0的整数。</li>
<li>其次，一般来说，简单的体系200步内就可以正常结束。</li>
<li>不知道什么时候收敛，初始结构很差，或者设置了很严格的收敛标准，那么你就要增大一下NSW的取值了，比如NSW&#x3D;500或者更大。</li>
<li>我们的这个O2例子很简单，设置了NSW&#x3D;10（你也可以设置为100,200或者500，不会影响计算结果的。）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">System = O</span><br><span class="line">ISMEAR = 0</span><br><span class="line">SIGMA  = 0.01</span><br><span class="line">ISPIN  = 2</span><br><span class="line">MAGMOM = 2*2</span><br><span class="line"></span><br><span class="line">IBRION = 2</span><br><span class="line">NSW = 10</span><br></pre></td></tr></table></figure>

<p>计算完成后，打开OSZICAR：</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/03/ex11/ex11-10.jpeg"><img src="https://www.bigbrosci.com/2017/12/03/ex11/ex11-10.jpeg" alt="img"></a></p>
<p>可以看到，结构优化进行了3步便停止了（如果你设置了NSW&#x3D;1000，那么也是3步后就结束）。其中，每一步内又包含了若干电子步。此时的你应该知道是什么参数控制优化的结束，如果不知道请查看前面Ex09中关于收敛的文章。思考一下： 同样优化200步，设置EDIFF&#x3D;1E-7和EDIFF&#x3D;1E-4会有什么区别呢？</p>
<p>查看下OUTCAR：</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/03/ex11/ex11-11.jpeg"><img src="https://www.bigbrosci.com/2017/12/03/ex11/ex11-11.jpeg" alt="img"></a></p>
<p>你会发现，优化过后，OUTCAR中α电子的占据状态调整过来了，β电子的保持不变。这说明计算成功了，优化起作用了。</p>
<p>那么优化过后的结构怎么查看呢？键长又是多少呢？</p>
<p>下面我们要开始真正掌握VASP的输出文件了：CONTCAR。 CONTCAR是VASP的一个输出文件，它包含了VASP计算中最后一步几何优化的结构信息，也就是优化完的结果。它也是文本格式，可以直接打开查看，如图：</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/03/ex11/ex11-12.jpeg"><img src="https://www.bigbrosci.com/2017/12/03/ex11/ex11-12.jpeg" alt="img"></a></p>
<p>怎么才能知道优化完的<code>O-O</code>键长是多少呢？</p>
<p>1）通过坐标直接算：</p>
<p>此时，要注意CONTCAR输出的是Direct坐标，也就是分数坐标，需要转换成笛卡尔坐标。</p>
<p>xy两个方向不用考虑（都是0），z方向的坐标相减即可：键长保留四位就足够了。</p>
<p>(0.136785-( -0.001953))*8.9 &#x3D; 1.2348 （Undefined control sequence \AA）</p>
<ol start="2">
<li>使用可视化软件测量：</li>
</ol>
<p>这样手动算，简单来说还可以，等复杂了就麻烦了，幸运的是，常用的建模软件中：p4vasp，VESTA，VMD，MS，ASE-gui等，都有测量键长的办法。这里简单讲解一下p4vasp 的用法。</p>
<h4 id="p4vasp的安装"><a href="#p4vasp的安装" class="headerlink" title="p4vasp的安装"></a>p4vasp的安装</h4><p>这个详见本书的附录2：<a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/11/18/A02/">https://www.bigbrosci.com/2017/11/18/A02/</a></p>
<p>1） Ubuntu 系统： <code>sudo apt-get install p4vasp</code></p>
<p>2） Windows系统： 下载p4vasp的安装包，解压后直接打开即可。</p>
<p>下面是Windows下通过p4vasp读取CONTCAR的方法。Linux的也可以这样做，但终端里面：<code>p4v CONTCAR</code> 更高效直接。打开VASP后的界面如下： 注意图中： <code>System：</code>后面的三个问号部分，后面会进行对比：</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/03/ex11/ex11-13.jpeg"><img src="https://www.bigbrosci.com/2017/12/03/ex11/ex11-13.jpeg" alt="img"></a></p>
<p>点击左侧栏中的 <code>Open</code> 选项。下图中，左侧点击进入CONTCAR所在的目录，进入后，在右侧会显示CONTCAR</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/03/ex11/ex11-14.jpeg"><img src="https://www.bigbrosci.com/2017/12/03/ex11/ex11-14.jpeg" alt="img"></a></p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/03/ex11/ex11-15.jpeg"><img src="https://www.bigbrosci.com/2017/12/03/ex11/ex11-15.jpeg" alt="img"></a></p>
<p>双击右侧的CONTCAR, 你会发现之前的三个问号？？？部分发生了变化：</p>
<p>显示的 O 表明VASP读取CONTCAR成功。</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/03/ex11/ex11-16.jpeg"><img src="https://www.bigbrosci.com/2017/12/03/ex11/ex11-16.jpeg" alt="img"></a></p>
<p>点击左侧的Show按钮，就可以查看结构了。</p>
<h5 id="可视化界面的基本操作"><a href="#可视化界面的基本操作" class="headerlink" title="可视化界面的基本操作"></a>可视化界面的基本操作</h5><p>鼠标左键按住不放，可以3维空间旋转结构；</p>
<p>鼠标中间摁住不放，可以上下，左右移动结构：</p>
<p>鼠标右键摁住不敢，动动鼠标可以缩放结构；</p>
<p>选择合适的观察位置：</p>
<p>1 把鼠标移动到你要选中的原子上，</p>
<p>2 通过空格（键盘上最长的键）用来选择或者取消选择原子：</p>
<p>3 选中两个氧原子后，如下图：</p>
<p><a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/12/03/ex11/ex11-17.jpeg"><img src="https://www.bigbrosci.com/2017/12/03/ex11/ex11-17.jpeg" alt="img"></a></p>
<p>选中之后，点<code>Structure</code> –&gt;<code>Measure</code> 显示键长为1.234774 Å，和我们手动计算的结果一样。</p>
<p>当然，也可以先点击：<code>Structure</code> –&gt;<code>Measure</code>，然后再选择感兴趣的原子。</p>
<h5 id="小结一下："><a href="#小结一下：" class="headerlink" title="小结一下："></a>小结一下：</h5><p>实验值为1.2075 Å，VASP计算结果为1.2348 Å。两者之间的差值为： 0.0289 Å，偏差为：(1.2348-1.2075)&#x2F;1.2075 &#x3D; 2.26%。对于理论和实验之间的偏差，如果小于5%，我们一般可以认为吻合的很好。有时候很多同学揪着VASP的计算结果与实验值的偏差不放，误差已经千分之几了，感觉心里还是不放心，有着一种不完全匹配不罢休的冲动。这大可不必放在心上，如果你的结果偏离实验值千分之几，直接用就可以了。</p>
<p>“To err is human; to describe the error properly is sublime.”<br>– Cliff Swartz, Physics Today 37 (1999),388.</p>
<p>对于其他的软件程序（MS，VESTA，VMD等），大家下载安装后，百度里面搜一搜教程，基本操作应该很快就能掌握。</p>
<p><img src="/img/image-20210913192031259.png" alt="image-20210913192031259"></p>
<p>VASP算出的能量（表中1 F  、2 F 、 3 F）基本都是负的，如果出现正的，说明有问题。</p>
<p>xshell crtl+d 断开链接</p>
<h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><p>head 文件名 默认显示文件前10行</p>
<p>​                  head -n 2 文件名  看前两行</p>
<p>​					tail 尾部</p>
<p>​					tail -f 文件名 动态查看文件最后10行（退出用Ctrl + c）</p>
<p>​				grep 命令  </p>
<p>​				grep “12345”  文件名 输出文件中包含12345的每一行的内容</p>
<p>​				grep -A1 “12345” 文件名   A指after 同时输出“12345”所在行的下一行</p>
<p>​				grep -B1 “12345” 文件名   B指befor</p>
<p>​			split 命令  分割文件成 多个文件件</p>
<p>​			split -l 6 file3  每6行分为一个文件</p>
<p>​	 </p>
<p>​			echo 命令</p>
<p>​			echo “hello” &gt; 文件名  把该文件<strong>清空</strong>然后写入hello</p>
<p>​			echo “hello” &gt; &gt; 文件名   在原文件后面(下一行）写入hello</p>
<p>​			cat </p>
<p>​			cat file3 file4 &gt; file5 把file3和file4的内容合并到5里面去</p>
<h1 id="shell脚本"><a href="#shell脚本" class="headerlink" title="shell脚本"></a>shell脚本</h1><p>通过bash 可执行文件名  命令来执行文件中的代码和命令</p>
<p><img src="/img/image-20210911151517038.png" alt="image-20210911151517038"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">例：</span><br><span class="line"></span><br><span class="line">a=2</span><br><span class="line"></span><br><span class="line">b=3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if [ $a -eq %b ]; then</span><br><span class="line"></span><br><span class="line">echo &quot;a=b&quot;</span><br><span class="line"></span><br><span class="line">else</span><br><span class="line"></span><br><span class="line">echo &quot;a!=b&quot;</span><br><span class="line"></span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>逻辑与 &amp;&amp;    逻辑或 ||</p>
<p><img src="/img/image-20210911152148751.png" alt="image-20210911152148751"></p>
<p>查看文件命令</p>
<p>more</p>
<p>less</p>
<p>运行less 命令 后，会显示文件的内容，</p>
<ul>
<li>如果要退出 敲一下 q 键即可;</li>
<li>如果想编辑文件，再敲一下键盘上的v键，则可以直接进入vim 的编辑界面。退出时和vim的退出方法是一样的。</li>
</ul>
<p><strong>sed 命令修改INCAR</strong></p>
<h1 id="牛顿"><a href="#牛顿" class="headerlink" title="牛顿"></a>牛顿</h1><p><img src="/img/image-20210911170437516.png" alt="image-20210911170437516"></p>
<p><img src="/img/image-20210911170449967.png" alt="image-20210911170449967"></p>
<p>module av 查看可用模块</p>
<p>module load 模块名   就是加载该模块，加载后就能用了</p>
<p>牛顿用的slurm集群管理和作业调度系统，要学习一下。</p>
<p>1.sinfo 查看各节点状态</p>
<p><img src="/img/image-20210916163259313.png" alt="image-20210916163259313"></p>
<p>2.slurm脚本</p>
<p><img src="/img/image-20210916163758292.png" alt="image-20210916163758292"></p>
<p>第三行指定队列</p>
<p>第四行指定运行时间（图中为无限，直到任务结束）</p>
<p>第五行指定 请求结点总数</p>
<p>第六行指定 核数</p>
<p>第七行指定 标准输出文件 和 错误输出文件</p>
<p>最后一行是自己写的脚本 （<strong>自己写的脚本要加上并行命令！！！！</strong>）</p>
<p><img src="/img/image-20210916165129935.png" alt="image-20210916165129935"></p>
<p><strong>mpirun -np 12 vasp_std  这是用12个核进行运算</strong></p>
<p>3.提交任务 sbatch .&#x2F;任务脚本</p>
<p><img src="/img/image-20210916163338852.png" alt="image-20210916163338852"></p>
<p>4.列出作业</p>
<p>squeue查看提交的作业</p>
<p><img src="/img/image-20210916164720304.png" alt="image-20210916164720304"></p>
<p>exit 退出计算结点</p>
<p><img src="/img/image-20210916163557713.png" alt="image-20210916163557713"></p>
<p>5.杀死自己的作业</p>
<p>用户可以杀死自己的作业，root可以杀死任何作业。</p>
<p><img src="https://img-blog.csdnimg.cn/20210622105556630.png" alt="img"></p>
<p>测试？</p>
<p><img src="/img/image-20210916163641166.png" alt="image-20210916163641166"></p>
<p>需要看的书籍</p>
<p>材料科学基础 徐祖耀</p>
<p>固体里导论 基泰尔</p>
<p>用ISIF &#x3D; 3的时候，</p>
<p>先算一次（比如十步），再把CONTAR转为POSCAR，再算一次（十步），</p>
<p>重复上述步骤，直到可以一步完成。</p>
<p>为什么这么做？Pulay stress ！！！！</p>
<h2 id="Accurate-bulk-relaxations-with-internal-parameters-one"><a href="#Accurate-bulk-relaxations-with-internal-parameters-one" class="headerlink" title="Accurate bulk relaxations with internal parameters (one)"></a>Accurate bulk relaxations with internal parameters (one)</h2><p>The general message is: whenever possible avoid volume relaxation with the default energy cutoff. Either increase the basis set by setting <a target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/ENCUT">ENCUT</a> manually in the <a target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/INCAR">INCAR</a> file, or use method two suggested below, which avoids doing volume relaxations at all. If volume relaxations are the only possible and feasible option please use the following step by step procedure (which minimizes errors to a minimum):</p>
<ul>
<li>Relax from starting structure (<a target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/ISMEAR">ISMEAR</a> should be 0 or 1).</li>
<li>Start a second relaxation from previous <a target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/CONTCAR">CONTCAR</a> file (re-relaxation).</li>
<li>As a final step perform one more energy calculation with the tetrahedron method switched on (i.e. <a target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/ISMEAR">ISMEAR</a>&#x3D;-5), to get very accurate and unambiguous energies (no relaxation for the final run). The final calculation should be done with <a target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/PREC">PREC</a>&#x3D;<em>High</em>, to get very accurate energies.</li>
</ul>
<p>A few things should be remarked here: Never take the energy obtained at the end of a relaxation run, if you allow for cell shape relaxations (the final basis set might not be isotropic). Instead perform one additional static run at the end.</p>
<p>The relaxation will give a structure which is correct to first order, the final error in the energy of step 3 is of second order (with respect to the structural errors). If you take the energy directly from the relaxation run, errors are usually significantly larger. Another important point is that the most accurate results for the relaxation will be obtained if the starting cell parameters are very close to the final cell parameters. If different runs yield different results, then the run which started from the configuration which was closest to the relaxed structure, is the most reliable one.</p>
<p>We strongly recommend to do any volume (and to lesser extend cell shape) relaxation with an increased basis set. <a target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/ENCUT">ENCUT</a>&#x3D;<img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/8e219c3a18943d69cb1cbb5625f53048661f689a" alt="1.3\times "> default cutoff is reasonable accurate in most cases. <a target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/PREC">PREC</a>&#x3D;<em>High</em> does also increase the energy cutoff by a factor of 1.25. At an increased cutoff the Pulay stress correction are usually not required.</p>
<h1 id="计算过程"><a href="#计算过程" class="headerlink" title="计算过程"></a>计算过程</h1><p>在计算前，要明确采用的是何种赝势；平面波截断能多大；K点网格多少；当采用Gaussian-Fermi smearing方法或Methfessel-Paxton smearing方法时，SIGMA多大；计算所选取的精度PREC；采取何种交换关联函数。</p>
<p>何种赝势（POTCAR）</p>
<p>选择的PP能使计算得到的单个原子能量值在1meV~10meV之间。</p>
<p>截断能ENCUT</p>
<p>选择的ENCUT应使得总能变化在0.001eV左右为宜。</p>
<p>注意：试探值最小为POTCAR中的ENMAX（多个时，取值最大的），递增间隔50；</p>
<p>另外，在进行变体积的结构优化时，最好保证ENCUT&#x3D;1.3ENMAX，以得到合理精度。</p>
<p>PREC&#x3D; Low &#x2F; Medium &#x2F; High &#x2F; Accurae</p>
<p>INCAR中未指定ENCUT时（即从POTCAR文件读入），PREC控制了ENCUT应取什么值。</p>
<p>选择的K点应使得总能变化在0.001eV左右即可。</p>
<p><img src="/img/image-20211124203641881.png" alt="image-20211124203641881"></p>
<p>看看之后的那些标签</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">Saber</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/post/0.html">http://example.com/post/0.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/VASP/">VASP</a></div><div class="post_share"><div class="social-share" data-image="/img/Saberve.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/post/1.html" title="SVD（Singular Value Decomposition）的直观理解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info">SVD（Singular Value Decomposition）的直观理解</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/Saberve.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Saber</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Saberve"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Saberve" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:gaoshangzhang21@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#VASP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text">VASP学习笔记</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vienna-Ab-initio-Simulation-Package"><span class="toc-number">2.</span> <span class="toc-text">Vienna Ab-initio Simulation Package</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#VASP%E7%A8%8B%E5%BA%8F%E7%9A%84%E4%B8%BB%E8%A6%81%E8%BE%93%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-number">2.1.</span> <span class="toc-text">VASP程序的主要输入文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#INCAR-POSCAR-POTCAR-KPOINTS%E5%9B%9B%E7%A7%8D"><span class="toc-number">2.1.1.</span> <span class="toc-text">INCAR  POSCAR POTCAR KPOINTS四种</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#INCAR%E6%98%AF%E6%9C%80%E9%87%8D%E8%A6%81%E7%9A%84%E3%80%82"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">INCAR是最重要的。</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="toc-number">2.1.2.</span> <span class="toc-text">常用参数：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E6%97%8B%E6%9E%81%E5%8C%96%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E8%AF%A5%E5%8A%A0%E5%91%A2"><span class="toc-number">2.1.3.</span> <span class="toc-text">自旋极化什么时候该加呢?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ISIF"><span class="toc-number">2.1.4.</span> <span class="toc-text">ISIF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-1-How-to-calculate-the-Pulay-stress"><span class="toc-number">2.1.5.</span> <span class="toc-text">7.6.1 How to calculate the Pulay stress</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#IBRION"><span class="toc-number">2.1.5.1.</span> <span class="toc-text">IBRION</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%95%E7%82%B9%E8%83%BD%E8%AE%A1%E7%AE%97-single-point-energy-%EF%BC%9F%E5%A6%82%E4%BD%95%E8%AE%A1%E7%AE%97%EF%BC%9Fhttps-www-jianshu-com-p-e484ee26d8f3"><span class="toc-number">2.2.</span> <span class="toc-text">2. 什么是单点能计算 (single point energy) ？如何计算？https:&#x2F;&#x2F;www.jianshu.com&#x2F;p&#x2F;e484ee26d8f3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PREC"><span class="toc-number">2.2.1.</span> <span class="toc-text">PREC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POSCAR%E6%96%87%E4%BB%B6%EF%BC%9A%E6%99%B6%E4%BD%93%E7%BB%93%E6%9E%84%E4%BF%A1%E6%81%AF%EF%BC%88%E4%B8%BB%E8%A6%81%E6%98%AF%E7%BB%99%E7%9A%84%E7%BB%93%E6%9E%84%EF%BC%8C%E8%A6%81%E7%AE%97%E4%BB%80%E4%B9%88%E4%BD%93%E7%B3%BB%EF%BC%8C%E6%89%80%E6%9C%89%E7%9A%84%E4%B8%9C%E8%A5%BF%E9%83%BD%E5%9C%A8%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E9%87%8C%E9%9D%A2%EF%BC%89"><span class="toc-number">2.2.2.</span> <span class="toc-text">POSCAR文件：晶体结构信息（主要是给的结构，要算什么体系，所有的东西都在这个文件里面）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B4%E6%98%8E"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">简单说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#POSCAR%E7%9A%84%E8%BE%93%E5%85%A5"><span class="toc-number">2.2.2.2.</span> <span class="toc-text">POSCAR的输入</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%A4%E7%82%B9%E8%AF%B4%E6%98%8E"><span class="toc-number">2.2.2.2.1.</span> <span class="toc-text">两点说明</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E8%8A%82%E9%87%8D%E7%82%B9%EF%BC%9A"><span class="toc-number">2.2.3.</span> <span class="toc-text">本节重点：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POTCAR%E6%96%87%E4%BB%B6%E6%98%AFPOSCAR%E6%96%87%E4%BB%B6%E4%B8%AD%E5%8C%85%E5%90%AB%E7%9A%84%E5%85%83%E7%B4%A0%EF%BC%8C%E6%AF%94%E5%A6%82%E8%AF%B4Si%E3%80%81O%E3%80%81Fe%E7%AD%89%EF%BC%8C%E5%AE%83%E7%9A%84%E8%B5%9D%E5%8A%BF%EF%BC%88%E5%B0%B1%E6%98%AF%E5%AE%83%E5%9C%A8%E8%BF%99%E4%B8%AA%E6%99%B6%E4%BD%93%E5%BD%93%E4%B8%AD%E7%9A%84%E5%8A%BF%E5%9C%BA%EF%BC%89"><span class="toc-number">2.2.4.</span> <span class="toc-text">POTCAR文件是POSCAR文件中包含的元素，比如说Si、O、Fe等，它的赝势（就是它在这个晶体当中的势场）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="toc-number">2.2.5.</span> <span class="toc-text">总结：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KPOINTS%E6%98%AF%E4%B8%80%E4%BA%9B%E4%B8%8D%E8%BF%9E%E7%BB%AD%E7%9A%84%E7%89%B9%E6%AE%8A%E7%82%B9%EF%BC%88%E4%B8%A4%E7%A7%8D%EF%BC%9Ak%E7%82%B9%E7%BD%91%E6%A0%BC%E6%88%96%E5%9D%90%E6%A0%87%E4%BF%A1%E6%81%AF%EF%BC%89"><span class="toc-number">2.2.6.</span> <span class="toc-text">KPOINTS是一些不连续的特殊点（两种：k点网格或坐标信息）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KPOINTS%E7%9A%84%E8%BE%93%E5%85%A5%E5%92%8C%E4%BF%9D%E5%AD%98"><span class="toc-number">2.2.7.</span> <span class="toc-text">KPOINTS的输入和保存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KPOINTS%E7%9A%84%E5%BB%BA%E8%AE%AE"><span class="toc-number">2.2.8.</span> <span class="toc-text">KPOINTS的建议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#KPOINTS%E7%9A%84%E5%8F%96%E5%80%BC%EF%BC%9A%E7%BB%8F%E9%AA%8C%E6%96%B9%E6%B3%95%EF%BC%88k-a%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">KPOINTS的取值：经验方法（k * a）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VASP%E7%A8%8B%E5%BA%8F%E7%9A%84%E4%B8%BB%E8%A6%81%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6"><span class="toc-number">2.4.</span> <span class="toc-text">VASP程序的主要输出文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VASP%E8%BF%90%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">2.5.</span> <span class="toc-text">VASP运行流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E4%B8%80%E4%B8%8B%EF%BC%9A%E4%B8%89%E6%AD%A5%E3%80%82%E7%BB%93%E6%9E%84%E4%BC%98%E5%8C%96%EF%BC%8C%E8%87%AA%E6%B4%BD%E8%AE%A1%E7%AE%97%EF%BC%8C%E9%9D%9E%E8%87%AA%E6%B4%BD%E8%AE%A1%E7%AE%97%E3%80%82%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%AE%8C%E6%88%90VASP%E7%9A%84%E5%87%A0%E4%B9%8E%E6%98%AF%E6%89%80%E6%9C%89%E7%9A%84%E6%80%A7%E8%B4%A8%E8%AE%A1%E7%AE%97%E7%9A%84%E6%AD%A5%E9%AA%A4%E3%80%82%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%BE%97%E5%88%B0%E7%A8%B3%E5%AE%9A%E7%9A%84%E7%BB%93%E6%9E%84%E4%BD%8D%E7%BD%AE%E3%80%81%E6%94%B6%E6%95%9B%E7%9A%84%E7%94%B5%E8%8D%B7%E5%AF%86%E5%BA%A6%E3%80%81%E8%BF%98%E6%9C%89%E5%AE%83%E7%9A%84%E4%B8%80%E4%BA%9B%E8%83%BD%E9%87%8F%E6%9C%AC%E5%BE%81%E5%80%BC%E7%AD%89%E4%B8%80%E4%BA%9B%E6%80%A7%E8%B4%A8%E3%80%82"><span class="toc-number">2.5.0.1.</span> <span class="toc-text">总结一下：三步。结构优化，自洽计算，非自洽计算。就可以完成VASP的几乎是所有的性质计算的步骤。就可以得到稳定的结构位置、收敛的电荷密度、还有它的一些能量本征值等一些性质。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%9D%E5%8A%BF%E3%80%81%E8%B5%9D%E6%B3%A2%E5%87%BD%E6%95%B0%E3%80%82"><span class="toc-number">2.6.</span> <span class="toc-text">赝势、赝波函数。</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#VASP%E6%98%AF%E6%80%8E%E4%B9%88%E5%88%A4%E6%96%AD%E6%94%B6%E6%95%9B%E7%9A%84"><span class="toc-number">2.6.1.</span> <span class="toc-text">VASP是怎么判断收敛的?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%B1%BC%E5%92%8C%E7%86%8A%E6%8E%8C%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">2.6.2.</span> <span class="toc-text">鱼和熊掌的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%9C%8BVASP%E7%9A%84%E8%AF%B4%E6%98%8E%E4%B9%A6"><span class="toc-number">2.6.3.</span> <span class="toc-text">如何看VASP的说明书</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%A0%E4%BD%95%E4%BC%98%E5%8C%96%E7%9A%84%E6%94%B6%E6%95%9B%E6%A0%87%E5%87%86"><span class="toc-number">2.6.4.</span> <span class="toc-text">几何优化的收敛标准</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93%E4%B8%80%E4%B8%8B"><span class="toc-number">2.6.4.0.1.</span> <span class="toc-text">小结一下</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%95%E7%82%B9%E8%AE%A1%E7%AE%97%EF%BC%9A"><span class="toc-number">3.</span> <span class="toc-text">单点计算：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#VASP-%E4%BC%98%E5%8C%96%E5%88%86%E5%AD%90%E7%BB%93%E6%9E%84"><span class="toc-number">3.0.1.</span> <span class="toc-text">VASP 优化分子结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#NSW-%E6%8E%A7%E5%88%B6%E5%87%A0%E4%BD%95%E7%BB%93%E6%9E%84%E4%BC%98%E5%8C%96%E7%9A%84%E6%AD%A5%E6%95%B0"><span class="toc-number">4.</span> <span class="toc-text">NSW 控制几何结构优化的步数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#p4vasp%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">4.0.0.1.</span> <span class="toc-text">p4vasp的安装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E7%95%8C%E9%9D%A2%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">4.0.0.1.1.</span> <span class="toc-text">可视化界面的基本操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93%E4%B8%80%E4%B8%8B%EF%BC%9A"><span class="toc-number">4.0.0.1.2.</span> <span class="toc-text">小结一下：</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">5.</span> <span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shell%E8%84%9A%E6%9C%AC"><span class="toc-number">6.</span> <span class="toc-text">shell脚本</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%89%9B%E9%A1%BF"><span class="toc-number">7.</span> <span class="toc-text">牛顿</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Accurate-bulk-relaxations-with-internal-parameters-one"><span class="toc-number">7.1.</span> <span class="toc-text">Accurate bulk relaxations with internal parameters (one)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E8%BF%87%E7%A8%8B"><span class="toc-number">8.</span> <span class="toc-text">计算过程</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/0.html" title="VASP学习笔记">VASP学习笔记</a><time datetime="2023-09-01T14:22:04.809Z" title="Created 2023-09-01 22:22:04">2023-09-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/1.html" title="SVD（Singular Value Decomposition）的直观理解">SVD（Singular Value Decomposition）的直观理解</a><time datetime="2023-08-27T12:31:04.054Z" title="Created 2023-08-27 20:31:04">2023-08-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/16107.html" title="Hello World">Hello World</a><time datetime="2023-08-27T11:59:41.703Z" title="Created 2023-08-27 19:59:41">2023-08-27</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/img.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Saber</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script async data-pjax src="{&quot;site_uv&quot;:true,&quot;site_pv&quot;:true,&quot;page_pv&quot;:true}"></script></div></body></html>